<div
  (scroll)="scrolltable()"
  class="tablescroll">
  <table class="my_table">
    <thead class="t_header">
    <tr class="headersPlaceholder">
      <th class="noselect">Дата</th>
      <th class="noselect">Событие</th>
      <th class="noselect">Смена</th>
      <th class="noselect">Место</th>
      <th class="noselect">Создатель</th>
      <th class="noselect">Стоимость</th>
      <th class="noselect">Выплата</th>
      <th class="noselect">Статус</th>
    </tr>
    </thead>
    <tbody >
    <tr *ngFor="let v of Viplati_filtered">
      <td>
        <div style="display: flex; width: max-content">
          <div style="height:available; display: flex; width: 48px;">
            <div *ngIf="!v.isSubmitted"
                 style="width: 8px; height: 8px; border-radius: 4px; background-color: #F12B43; margin: auto"></div>
            <div *ngIf="v.isSubmitted"
                 style="width: 8px; height: 8px; border-radius: 4px; background-color: #06A561; margin: auto"></div>
          </div>
          <div style="text-align: left; font-size: 12px">
            <span style="color: #5A607F">{{ v.date }}</span><br>
            <span style="color: #7E84A3">{{v.timeRange}}</span>
            <div style="border: 1px solid #D7DBEC; border-radius: 5px; width: fit-content; padding: 0 6px">
              {{v.time}}
            </div>
          </div>
        </div>
      </td>
      <td>{{ v.name }}</td>
      <td style="color: #333752">{{ v.smena }}</td>
      <td style="color: #333752">{{ v.mesto }} <img src="assets/icons/human.svg"></td>
      <td style="width: max-content">
        <span style="color: #5A607F">{{ v.fio }}</span><br>
        <span style="font-size: 12px">{{v.fiodate}}</span>
      </td>
      <td>{{ v.moneyExpected }} ₽</td>
      <!--        <td><label class="inputText"><input type="text" [value]="v.moneyGot"> ₽</label></td>-->
      <td>
        <label class="inputText" *ngIf="!v.isSubmitted"><span role="textbox"
                                                              contenteditable="true" (keydown)="inNumberPressed($event)" [textContent]="v.moneyGot" (input)="moneyGotInput($event, v)"></span>₽</label>
        <span class="lightgreenspan" style="white-space: nowrap;" *ngIf="v.isSubmitted">{{v.moneyGot}} ₽</span>
      </td>
      <td style="text-align: center">
        <div style="display: flex; width: 100%; justify-content: center">
          <button [class]="checkCommentButton(v)" (click)="commentclick(v)"
                  (focusout)="commentunfocus(v, $event)"></button>
          <div class="commentWindow" *ngIf="v.isClicked" [style]="getcommentstyle(v)">
              <textarea (keyup.enter)="submitcomment(v)"
                        placeholder="Введите комментарий и нажмите Enter для сохранения" class="typehere"
                        (focusout)="commentunfocus(v, $event)" [(ngModel)]="v.commentary"></textarea>
            <div style="display: flex; justify-content: space-between">
              <button class="redButton">Отмена</button>
              <button class="greenButton" (click)="submitcomment(v)">Сохранить</button>
            </div>
          </div>
          <button class="okButton" (click)="okclick(v)" *ngIf="!v.isSubmitted"></button>
          <button class="editButton" (click)="editclick(v)" *ngIf="v.isSubmitted"></button>
        </div>
      </td>
    </tr>
    <tr *ngIf="Viplati_filtered.length == 0"><td colspan="8">За данный период нет неоценённых событий</td></tr>
    </tbody>
    <thead class="t_footer">
    <tr style="border: 1px solid #d7dbec;">
      <th class="borders">Итого</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th class="borders">{{expectedSum()}} ₽</th>
      <th class="borders"> <span [textContent]="gotSum()"></span> ₽</th>
      <th></th>
    </tr>
    </thead>
  </table>
</div>
